<!DOCTYPE html><html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Proyecto X ‚Äì Parciales</title>
<style>
body{font-family:Arial,sans-serif;background:#f6f6f6;margin:0;padding:20px}
h1{text-align:center;margin-bottom:5px}
h2{text-align:center;font-weight:normal;margin-top:0}.dashboard{display:flex;gap:15px;margin:20px 0} .card-top{flex:1;background:#fff;border-radius:12px;padding:15px;border:1px solid #ddd} .progress{height:8px;background:#eee;border-radius:10px;overflow:hidden;margin-top:8px} .progress div{height:100%;background:#000}

.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:15px} .parcial-card{background:#fff;border-radius:12px;border:1px solid #ddd;height:200px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;text-align:center;padding:10px} .parcial-card:hover{background:#f0f0f0}

.new{border:2px dashed #aaa;font-size:32px}

.hidden{display:none}

input,button{width:100%;padding:8px;margin-top:8px} button{background:#000;color:#fff;border:none;border-radius:8px}

.detalle{background:#fff;border-radius:12px;border:1px solid #ddd;padding:15px} ul{list-style:none;padding:0} li{display:flex;align-items:center;gap:8px;margin:6px 0} .done{text-decoration:line-through;color:gray} .back{margin-bottom:10px;background:#666} </style>

</head>
<body><div id="home">
  <h1>PROYECTO X</h1>
  <h2>Bienvenido ¬øqu√© hay hoy para hacer?</h2>  <div class="dashboard" id="hoy"></div>  <h3>Todos los parciales</h3>
  <div class="grid" id="lista"></div>
</div><div id="detalle" class="hidden"></div><script>
let parciales=JSON.parse(localStorage.getItem('parciales'))||[];
let actual=null;

function guardar(){localStorage.setItem('parciales',JSON.stringify(parciales))}
function dday(f){return Math.ceil((new Date(f)-new Date())/(1000*60*60*24))}

function renderHome(){
  const hoy=document.getElementById('hoy');
  const lista=document.getElementById('lista');
  hoy.innerHTML=''; lista.innerHTML='';

  parciales.slice(0,2).forEach(p=>{
    const div=document.createElement('div');
    div.className='card-top';
    div.style.borderTop=`6px solid ${p.color||'#000'}`;
    div.innerHTML=`<div style="font-size:24px">${p.emoji||'üìò'}</div><b>${p.nombre}</b><br>D-DAY ${dday(p.fecha)}<br>${p.progreso||0}%
    <div class='progress'><div style='width:${p.progreso||0}%'></div></div>`;
    hoy.appendChild(div);
  })
  })

  parciales.forEach((p,i)=>{
    const div=document.createElement('div');
    div.className='parcial-card';
    div.style.borderTop=`6px solid ${p.color||'#000'}`;
    div.innerHTML=`<div style="font-size:28px">${p.emoji||'üìò'}</div><div><b>${p.nombre}</b><br>D-DAY ${dday(p.fecha)}<br>${p.progreso||0}%</div>`;
    div.onclick=()=>abrirDetalle(i);
    lista.appendChild(div);
  })
  })

  const nuevo=document.createElement('div');
  nuevo.className='parcial-card new';
  nuevo.innerText='+';
  nuevo.onclick=()=>crearParcial();
  lista.appendChild(nuevo);
}

function crearParcial(){
  const nombre=prompt('Nombre del parcial');
  const fecha=prompt('Fecha (YYYY-MM-DD)');
  const emoji=prompt('Emoji del parcial (ej: üìò üß† üî¨)');
  const color=prompt('Color del parcial (ej: #ffcc00 o red)');
  if(!nombre||!fecha)return;
  parciales.push({nombre,fecha,emoji:emoji||'üìò',color:color||'#ffffff',temas:[]});
  guardar();
  renderHome();
}
}

function abrirDetalle(i){
  actual=i;
  document.getElementById('home').classList.add('hidden');
  document.getElementById('detalle').classList.remove('hidden');
  renderDetalle();
}

function renderDetalle(){
  const p=parciales[actual];
  const cont=document.getElementById('detalle');
  const hechos=p.temas.filter(t=>t.hecho).length;
  const prog=p.temas.length?Math.round((hechos/p.temas.length)*100):0;
  p.progreso=prog;
  cont.innerHTML=`
  <button class='back' onclick='volver()'>‚Üê Volver</button>
  <div class='detalle'>
    <h2>${p.nombre}</h2>
    <p>D-DAY ${dday(p.fecha)}</p>
    <p>Progreso ${prog}%</p>
    <div class='progress'><div style='width:${prog}%'></div></div>

    <input id='temaNuevo' placeholder='Nuevo tema' />
    <button onclick='agregarTema()'>Agregar tema</button>

    <ul>
      ${p.temas.map((t,j)=>`<li>
        <input type='checkbox' ${t.hecho?'checked':''} onchange='toggleTema(${j})' />
        <span class='${t.hecho?'done':''}'>${t.nombre}</span>
      </li>`).join('')}
    </ul>
  </div>`;
  guardar();
}

function agregarTema(){
  const input=document.getElementById('temaNuevo');
  if(!input.value)return;
  parciales[actual].temas.push({nombre:input.value,hecho:false});
  input.value='';
  renderDetalle();
}

function toggleTema(j){
  parciales[actual].temas[j].hecho=!parciales[actual].temas[j].hecho;
  renderDetalle();
}

function volver(){
  document.getElementById('detalle').classList.add('hidden');
  document.getElementById('home').classList.remove('hidden');
  renderHome();
}

renderHome();
</script></body>
</html>
